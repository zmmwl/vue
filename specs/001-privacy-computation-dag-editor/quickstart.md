# 快速开始指南

**Feature**: 隐私计算任务可视化拖拽编辑器
**Date**: 2026-01-16

本文档帮助开发者快速设置开发环境、运行项目并开始使用DAG编辑器。

## 环境要求

- **Node.js**: 18.0.0 或更高版本
- **pnpm/npm**: 推荐 pnpm 8.0+ 或 npm 9.0+
- **Git**: 用于版本控制
- **代码编辑器**: VS Code（推荐）或支持TypeScript的编辑器

## 项目设置

### 1. 克隆仓库

```bash
git clone <repository-url>
cd vue
```

### 2. 安装依赖

```bash
# 使用 pnpm（推荐）
pnpm install

# 或使用 npm
npm install
```

### 3. 配置开发环境

确保安装了以下VS Code扩展（可选但推荐）：
- Vue - Official（[Vue.volar]）
- TypeScript Vue Plugin (Volar)
- Vue 3 Snippets
- ESLint
- Prettier

## 运行开发服务器

```bash
# 启动开发服务器
pnpm dev

# 或
npm run dev
```

服务器将在 `http://localhost:5173` 启动。

## 创建第一个DAG任务图

### 步骤1：打开应用

在浏览器中访问 `http://localhost:5173`，你将看到三栏布局的编辑器界面：
- 左侧：资源库（可折叠）
- 中间：画布区域
- 右侧：属性编辑面板

### 步骤2：拖拽数据资源

1. 点击左侧资源库的"数据资源"展开面板
2. 查看可用的数据资源（按参与方分组）
3. 将"用户表"数据资源拖拽到画布顶端
4. 数据资源将以圆形显示在画布上

### 步骤3：添加计算任务

1. 展开"计算任务"面板
2. 选择"PSI计算"任务
3. 拖拽到画布中数据资源下方
4. 计算任务将以圆角长方形显示

### 步骤4：连接元素

1. 点击数据资源节点，下边缘会出现连接点
2. 从连接点拖出一条线到PSI计算任务的上边缘
3. 松开鼠标完成连接
4. 连线将以有向箭头显示，表示数据流向

### 步骤5：附着模型和算力

1. 展开"模型资源"面板
2. 将TEE模型拖拽到PSI计算任务上
3. 模型将以菱形附着点显示在任务旁边
4. 同样方式为任务附着算力资源

### 步骤6：编辑属性

1. 点击画布中的任意元素
2. 右侧属性面板将显示该元素的可编辑属性
3. 修改属性值（如名称、配置参数等）
4. 修改会实时反映在画布中的元素上

### 步骤7：创建多个任务图

1. 点击顶部的"+"按钮创建新tab
2. 在新tab中重复上述步骤创建另一个DAG
3. 点击tab标签切换不同的任务图

## 导出和导入任务图

### 导出任务图

1. 确保当前任务图已完成编排
2. 点击工具栏的"导出"按钮
3. 浏览器将下载 `task-graph.json` 文件
4. 文件包含任务图的所有元素、连线和属性

### 导入任务图

1. 点击工具栏的"导入"按钮
2. 选择之前导出的JSON文件
3. 系统将验证文件格式
4. 验证通过后，任务图将在新tab中显示
5. 如果文件格式有误，将显示详细的错误信息

## 测试运行

### 运行单元测试

```bash
pnpm test
```

### 运行组件测试

```bash
pnpm test:component
```

### 运行端到端测试

```bash
pnpm test:e2e
```

### 构建生产版本

```bash
pnpm build
```

构建产物将输出到 `dist/` 目录。

## 项目结构概览

```
vue/
├── src/                    # 源代码
│   ├── components/          # Vue组件
│   ├── stores/             # Pinia状态管理
│   ├── types/             # TypeScript类型定义
│   ├── utils/             # 工具函数
│   ├── data/              # 静态数据（资源库）
│   └── main.ts            # 应用入口
├── tests/                 # 测试代码
├── specs/                 # 特性规格和设计文档
├── package.json           # 项目配置
└── tsconfig.json         # TypeScript配置
```

## 常见问题

### Q: 拖拽节点时没有响应？

A: 确保已正确安装依赖，并检查浏览器控制台是否有错误。某些浏览器扩展可能干扰拖拽功能，尝试在无痕模式下测试。

### Q: 导入的JSON文件报错？

A: 检查JSON文件格式是否符合schema版本要求。查看错误详情了解具体问题（如缺少字段、类型不匹配）。

### Q: 如何添加自定义的资源库数据？

A: 编辑 `src/data/resources.ts` 文件，添加自定义的数据资源、计算任务等数据。修改后需重启开发服务器。

### Q: 如何修改主题颜色？

A: 项目使用Element Plus主题，可以在 `src/style.css` 中覆盖CSS变量来自定义主题颜色。

### Q: 性能问题怎么办？

A: 如果画布元素较多时卡顿，尝试：
1. 关闭小地图和控件面板
2. 减少同时打开的tab数量
3. 检查浏览器性能设置
4. 确保使用最新版Chrome或Firefox

## 下一步

- 阅读 [spec.md](spec.md) 了解完整的功能规格
- 阅读 [data-model.md](data-model.md) 了解数据模型设计
- 阅读 [contracts/api-types.ts](contracts/api-types.ts) 查看类型定义
- 查看 `.specify/memory/constitution.md` 了解开发原则

## 获取帮助

如果遇到问题：
1. 检查浏览器控制台错误
2. 查看项目文档（如有）
3. 在项目issue跟踪器中搜索或提交问题
